# SEO Checker MVP ğŸš€

**ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ SEO-Ğ°ÑƒĞ´Ğ¸Ñ‚ ÑĞ°Ğ¹Ñ‚Ğ¾Ğ² Ğ·Ğ° 60 ÑĞµĞºÑƒĞ½Ğ´ Ñ‡ĞµÑ€ĞµĞ· Telegram-Ğ±Ğ¾Ñ‚**

[![Tests](https://img.shields.io/badge/tests-49%20passing-success)](backend/tests)
[![Coverage](https://img.shields.io/badge/coverage-89.54%25-success)](backend)
[![Python](https://img.shields.io/badge/python-3.9%2B-blue)](backend)
[![FastAPI](https://img.shields.io/badge/FastAPI-0.109-green)](backend)

---

## ğŸ“‹ ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ

SEO Checker MVP â€” ÑÑ‚Ğ¾ Telegram-Ğ±Ğ¾Ñ‚ Ğ¸ backend API Ğ´Ğ»Ñ Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾Ğ¹ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ¸ Ğ±Ğ°Ğ·Ğ¾Ğ²Ñ‹Ñ… SEO-Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞº ÑĞ°Ğ¹Ñ‚Ğ¾Ğ².

**Ğ’Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸:**
- âœ… 13 Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… SEO-Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€Ğ¾Ğº
- âœ… Telegram-Ğ±Ğ¾Ñ‚ Ñ ĞºÑ€Ğ°ÑĞ¸Ğ²Ñ‹Ğ¼Ğ¸ Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚Ğ°Ğ¼Ğ¸
- âœ… UTM-tracking Ğ¸ Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ° ĞºĞ¾Ğ½Ğ²ĞµÑ€ÑĞ¸Ğ¹
- âœ… Rate limiting (5 Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€Ğ¾Ğº/Ñ‡Ğ°Ñ)
- âœ… PostgreSQL database Ñ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸ĞµĞ¹
- âœ… REST API Ğ´Ğ»Ñ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¹
- âœ… 89.54% code coverage

**Ğ’Ñ€ĞµĞ¼Ñ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ¸:** ~10-15 ÑĞµĞºÑƒĞ½Ğ´  
**Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ:** MVP Ğ³Ğ¾Ñ‚Ğ¾Ğ² Ğº deployment ğŸ¯

---

## ğŸ” SEO-Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ¸

### 1. Robots.txt
- ĞĞ°Ğ»Ğ¸Ñ‡Ğ¸Ğµ Ñ„Ğ°Ğ¹Ğ»Ğ°
- Ğ”Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ¾ÑÑ‚ÑŒ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ¸ÑĞºĞ¾Ğ²Ğ¸ĞºĞ¾Ğ²
- ĞĞ°Ğ»Ğ¸Ñ‡Ğ¸Ğµ Sitemap
- Ğ‘Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²ĞºĞ¸ ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ñ‹Ñ… Ğ¿ÑƒÑ‚ĞµĞ¹

### 2. Sitemap.xml
- ĞĞ°Ğ»Ğ¸Ñ‡Ğ¸Ğµ Ñ„Ğ°Ğ¹Ğ»Ğ°
- Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ½Ğ¾ÑÑ‚ÑŒ XML
- Ğ”Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ¾ÑÑ‚ÑŒ URL
- Ğ¡Ğ¾Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²Ğ¸Ğµ ÑÑ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ñƒ

### 3. Meta Tags
- Title (30-65 ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¾Ğ²)
- Description (120-160 ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¾Ğ²)
- OpenGraph tags
- Ğ£Ğ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ

### 4. Headings (H1-H6)
- ĞĞ°Ğ»Ğ¸Ñ‡Ğ¸Ğµ H1
- Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ·Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²ĞºĞ¾Ğ²
- Ğ˜ĞµÑ€Ğ°Ñ€Ñ…Ğ¸Ñ
- ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾

### 5. Noindex/Nofollow
- Meta robots
- X-Robots-Tag headers
- Ğ‘Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²ĞºĞ¸ Ğ¸Ğ½Ğ´ĞµĞºÑĞ°Ñ†Ğ¸Ğ¸

### 6. Analytics
- Google Analytics
- Yandex.Metrika
- Google Tag Manager

---

## ğŸ“ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

```
seo-checker-tool/
â”œâ”€â”€ backend/                    # FastAPI Backend
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ main.py            # FastAPI app
â”‚   â”‚   â”œâ”€â”€ models.py          # SQLAlchemy models
â”‚   â”‚   â”œâ”€â”€ schemas.py         # Pydantic schemas
â”‚   â”‚   â”œâ”€â”€ database.py        # DB connection
â”‚   â”‚   â”œâ”€â”€ report_builder.py # Report generation
â”‚   â”‚   â”œâ”€â”€ checks/            # SEO checks (6 modules)
â”‚   â”‚   â””â”€â”€ routes/            # API endpoints
â”‚   â”œâ”€â”€ tests/
â”‚   â”‚   â”œâ”€â”€ unit/              # 30 unit tests
â”‚   â”‚   â”œâ”€â”€ integration/       # 17 integration tests
â”‚   â”‚   â””â”€â”€ e2e/               # 2 E2E tests
â”‚   â”œâ”€â”€ migrations/            # Alembic migrations
â”‚   â”œâ”€â”€ Procfile               # Railway config
â”‚   â”œâ”€â”€ railway.json
â”‚   â””â”€â”€ requirements.txt
â”‚
â”œâ”€â”€ telegram-bot/              # Telegram Bot
â”‚   â”œâ”€â”€ bot.py                 # Main entry
â”‚   â”œâ”€â”€ handlers/              # Command handlers
â”‚   â”‚   â”œâ”€â”€ start.py           # /start + deep links
â”‚   â”‚   â””â”€â”€ help.py            # /help
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ api_client.py      # Backend API client
â”‚   â”‚   â””â”€â”€ formatter.py       # Report formatting
â”‚   â”œâ”€â”€ tests/                 # 13 unit tests
â”‚   â”œâ”€â”€ Procfile               # Railway config
â”‚   â”œâ”€â”€ railway.json
â”‚   â””â”€â”€ requirements.txt
â”‚
â”œâ”€â”€ frontend/                  # Web Form (GitHub Pages)
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ styles.css
â”‚   â””â”€â”€ script.js
â”‚
â”œâ”€â”€ specs/                     # SpecifyX specs
â”‚   â””â”€â”€ 001-seo-checker/
â”‚
â””â”€â”€ docs/                      # Documentation
    â”œâ”€â”€ PROGRESS.md
    â”œâ”€â”€ HANDOFF.md
    â””â”€â”€ deployment guides
```

---

## ğŸš€ Quick Start

### Prerequisites
- Python 3.9+
- PostgreSQL (production) or SQLite (testing)
- Telegram Bot Token (from @BotFather)
- Railway account (for deployment)

### Local Development

#### 1. Backend API

```bash
cd backend/
python -m venv .venv
source .venv/bin/activate  # Windows: .venv\Scripts\activate
pip install -r requirements.txt

# Run tests
pytest tests/ -v --cov=app

# Start server
uvicorn app.main:app --reload
# API available at http://localhost:8000
```

#### 2. Telegram Bot

```bash
cd telegram-bot/
python -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt

# Set environment variables
export TELEGRAM_TOKEN="your_token_from_botfather"
export API_URL="http://localhost:8000"

# Run bot
python bot.py
```

#### 3. Web Form

```bash
cd frontend/
# Open in browser
open index.html
```

---

## ğŸ§ª Testing

### Run All Tests

```bash
cd backend/
source .venv/bin/activate

# Unit + Integration tests
pytest tests/ -m "not e2e" -v --cov=app

# E2E tests (with real HTTP requests)
pytest tests/e2e/ -v -m e2e

# All tests
pytest tests/ -v

# Coverage report
pytest tests/ --cov=app --cov-report=html
open htmlcov/index.html
```

### Test Statistics
- **Total**: 49 tests (47 unit/integration + 2 E2E)
- **Coverage**: 89.54%
- **Speed**: 0.37s (unit/integration), 5.89s (E2E)
- **Status**: âœ… All passing

### Code Quality

```bash
# Linting
ruff check .

# Type checking
mypy app/ --strict

# Formatting
ruff format .
```

---

## ğŸŒ API Documentation

### Base URL
- **Local**: `http://localhost:8000`
- **Production**: `https://your-backend.railway.app`

### Endpoints

#### Health Check
```http
GET /api/health
```

**Response:**
```json
{
  "status": "ok",
  "database": "connected"
}
```

#### SEO Check
```http
POST /api/check
Content-Type: application/json

{
  "site_url": "https://example.com",
  "telegram_id": 123456789,
  "session_id": "550e8400-e29b-41d4-a716-446655440000"  // Optional
}
```

**Response:**
```json
{
  "score": 7.5,
  "problems_critical": 1,
  "problems_important": 2,
  "checks_ok": 3,
  "categories": [...],
  "top_priorities": [...],
  "detailed_checks": [...],
  "metadata": {
    "checked_at": "2026-02-19T12:00:00Z",
    "processing_time_sec": 12,
    "checks_total": 6
  }
}
```

**Rate Limiting**: 5 requests per hour per `telegram_id`

#### Track Session (NEW)
```http
POST /api/track-session
Content-Type: application/json

{
  "session_id": "550e8400-e29b-41d4-a716-446655440000",
  "utm_source": "google",
  "utm_medium": "cpc",
  "utm_campaign": "seo_check",
  "referrer": "https://google.com",
  "user_agent": "Mozilla/5.0..."
}
```

**Response:**
```json
{
  "session_id": "550e8400-e29b-41d4-a716-446655440000",
  "status": "created",
  "message": "Session tracked successfully"
}
```

#### Update Session with Telegram Data (NEW)
```http
POST /api/update-session-telegram
Content-Type: application/json

{
  "session_id": "550e8400-e29b-41d4-a716-446655440000",
  "telegram_id": 123456789,
  "telegram_username": "user123"
}
```

**Response:**
```json
{
  "session_id": "550e8400-e29b-41d4-a716-446655440000",
  "status": "updated",
  "message": "Telegram data added to session"
}
```

---

## ğŸš¢ Deployment to Railway

### Backend Deployment

```bash
# Install Railway CLI
npm install -g @railway/cli
railway login

# Deploy backend
cd backend/
railway init
railway add  # Select PostgreSQL
railway variables set ENVIRONMENT=production
railway up

# Run migrations
railway run python -m alembic upgrade head

# Get URL
railway domain
```

**See**: `backend/README_DEPLOYMENT.md` for detailed instructions.

### Bot Deployment

```bash
# Deploy bot
cd telegram-bot/
railway init
railway variables set TELEGRAM_TOKEN=your_token
railway variables set API_URL=https://your-backend.railway.app
railway up
```

**See**: `telegram-bot/README_DEPLOYMENT.md` for detailed instructions.

---

## ğŸ“Š Database Schema

### Table: `web_sessions` (NEW)
Tracks web form visits with UTM parameters and Telegram attribution.

| Column | Type | Description |
|--------|------|-------------|
| id | Integer | Primary key |
| session_id | UUID | Unique session identifier |
| utm_source | String(255) | UTM source parameter |
| utm_medium | String(255) | UTM medium parameter |
| utm_campaign | String(255) | UTM campaign parameter |
| utm_term | String(255) | UTM term parameter |
| utm_content | String(255) | UTM content parameter |
| referrer | Text | HTTP referrer |
| user_agent | Text | Browser user agent |
| telegram_id | BigInteger | User Telegram ID (filled on bot open) |
| telegram_username | String(255) | Telegram username |
| bot_started_at | Timestamp | When user opened bot |
| created_at | Timestamp | Session creation time |

### Table: `check_requests`
Stores user SEO check requests.

| Column | Type | Description |
|--------|------|-------------|
| id | Integer | Primary key |
| telegram_id | BigInteger | User Telegram ID |
| site_url | String(500) | Site URL |
| status | String(50) | pending/completed/failed |
| session_id | UUID | FK to web_sessions (nullable) |
| created_at | Timestamp | Request time |

### Table: `check_results`
Stores SEO check results with reports.

| Column | Type | Description |
|--------|------|-------------|
| id | Integer | Primary key |
| check_request_id | Integer | FK to check_requests |
| score | Decimal(3,1) | SEO score (0-10) |
| problems_critical | Integer | Critical issues count |
| problems_important | Integer | Important issues count |
| checks_ok | Integer | Passed checks count |
| report_data | JSON | Full report |
| detailed_checks | JSON | Detailed check results |
| processing_time_sec | Integer | Processing duration |

---

## ğŸ”„ User Flow

### Web Form â†’ Telegram Bot â†’ Check

1. **Landing Page** (`frontend/`)
   - User clicks "ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ Telegram-Ğ±Ğ¾Ñ‚"
   - Generates unique `session_id` (UUID)
   - Tracks UTM parameters from URL
   - Sends POST to `/api/track-session`
   - Opens Telegram with deep link: `https://t.me/bot?start=session_{UUID}`

2. **Telegram Bot** (`telegram-bot/`)
   - Bot receives `/start session_{UUID}`
   - Updates session with `telegram_id` + `username`
   - User sends website URL (e.g., `https://example.com`)
   - Bot calls `/api/check` with `session_id`
   - User receives formatted SEO report

3. **Attribution** (Database)
   - Full chain: UTM â†’ Telegram User â†’ Checks
   - Analytics: conversion funnel by source/campaign
   - Multiple checks per session supported

---

## ğŸ¤– Telegram Bot Commands

### `/start`
Welcome message with instructions.

**With session deep link (from web form):**
```
/start session_550e8400-e29b-41d4-a716-446655440000
```
Updates web session with Telegram user data and prompts for URL.

**Without arguments:**
```
/start
```
Shows welcome message and asks user to send URL directly.

### `/help`
Shows bot features and usage instructions.

---

## ğŸ›  Tech Stack

### Backend
- **FastAPI** 0.109.0 â€” Web framework
- **SQLAlchemy** 2.0.25 â€” ORM (async)
- **PostgreSQL** â€” Database (asyncpg driver)
- **Pydantic** 2.5.3 â€” Data validation
- **httpx** 0.26.0 â€” Async HTTP client
- **BeautifulSoup4** 4.12.3 â€” HTML parsing
- **Alembic** 1.16.5 â€” Database migrations

### Bot
- **python-telegram-bot** 20.7 â€” Telegram API
- **httpx** 0.25.2 â€” HTTP client
- **Pydantic** 2.5.3 â€” Data validation

### Testing
- **pytest** 7.4.4 â€” Test framework
- **pytest-asyncio** 0.23.3 â€” Async tests
- **pytest-cov** 4.1.0 â€” Coverage
- **ruff** 0.1.14 â€” Linter
- **mypy** 1.8.0 â€” Type checker

### Deployment
- **Railway** â€” Hosting (backend + bot + PostgreSQL)
- **NIXPACKS** â€” Build system
- **Alembic** â€” Production migrations

---

## ğŸ“ˆ Project Status

**Progress**: 38/42 tasks (90.5%) âœ…

- âœ… Module 1: Project Setup (4/4)
- âœ… Module 2: Core Checks (12/12)
- âœ… Module 3: Report Builder (2/2)
- âœ… Module 4: Backend API (7/7)
- âœ… Module 5: Telegram Bot (7/7)
- âœ… Module 6: Integration Tests (3/3)
- ğŸ”„ Module 7: Deployment (3/4 â€” 75%)
- â³ Module 8: Documentation (in progress)

**Time Spent**: ~23 hours  
**Remaining**: ~1-2 hours to MVP

---

## ğŸ¯ Metrics & KPIs

### Performance
- â±ï¸ **Check Time**: 10-15 seconds average
- ğŸ“Š **Score Range**: 0-10 (decimal precision)
- ğŸ”’ **Rate Limit**: 5 checks/hour per user
- ğŸ“ˆ **Coverage**: 89.54% code coverage

### Quality
- âœ… **Tests**: 49/49 passing
- âœ… **Linters**: Ruff (0 errors)
- âœ… **Type Safety**: MyPy strict mode
- âœ… **E2E**: Real HTTP tests passing

---

## ğŸ“š Documentation

- **[CHANGES_SUMMARY.md](CHANGES_SUMMARY.md)** â€” Summary of UTM tracking implementation
- **[UTM_TRACKING_IMPLEMENTATION.md](UTM_TRACKING_IMPLEMENTATION.md)** â€” Full architecture and analytics
- **[DEPLOYMENT_CHECKLIST.md](DEPLOYMENT_CHECKLIST.md)** â€” Step-by-step deployment guide
- **[PROGRESS.md](PROGRESS.md)** â€” Detailed task tracking
- **[HANDOFF.md](HANDOFF.md)** â€” Project handoff document
- **[backend/README_DEPLOYMENT.md](backend/README_DEPLOYMENT.md)** â€” Backend deployment guide
- **[telegram-bot/README_DEPLOYMENT.md](telegram-bot/README_DEPLOYMENT.md)** â€” Bot deployment guide
- **[specs/001-seo-checker/](specs/001-seo-checker/)** â€” SpecifyX specifications

---

## ğŸ› Known Limitations (MVP)

1. **No authentication** â€” Rate limiting by telegram_id only
2. **No admin dashboard** â€” Check Railway logs for monitoring
3. **Basic error handling** â€” Graceful degradation implemented
4. **No scheduled checks** â€” Manual checks only
5. **No historical comparison** â€” Each check is independent

---

## ğŸ—ºï¸ Roadmap

### V1.0 (Post-MVP)
- [ ] Admin dashboard
- [ ] Historical comparison
- [ ] More checks (Page Speed, Mobile-friendly, Schema.org)
- [ ] PDF reports
- [ ] Email notifications

### V2.0 (Future)
- [ ] Scheduled weekly checks
- [ ] Competitor comparison
- [ ] API for third-party integrations
- [ ] Multi-language support

---

## ğŸ¤ Contributing

This is a proprietary project for Ida.Lite. Internal development only.

### Development Workflow
1. Create feature branch: `git checkout -b feature/your-feature`
2. Write tests first (TDD)
3. Implement feature
4. Run tests: `pytest tests/ -v`
5. Run linters: `ruff check . && mypy app/`
6. Commit: `git commit -m "feat: add your feature"`
7. Push: `git push origin feature/your-feature`

---

## ğŸ“œ License

Proprietary â€” Ida.Lite Â© 2026

---

## ğŸ‘¤ Contact

- **Email**: hello@idalite.ru
- **Telegram**: @idalite_support
- **GitHub**: [Private Repository]

---

## ğŸ™ Acknowledgments

- Built with â¤ï¸ by Claude (Cursor Agent)
- Developed using TDD methodology
- Following SpecifyX workflow
- Powered by Railway

---

**Last Updated**: 2026-02-19  
**Version**: MVP 1.0  
**Status**: Ready for Deployment ğŸš€
